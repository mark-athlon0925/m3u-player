<!DOCTYPE html>
<html>
    <head>
    <meta charset=utf-8 />
    <title>tv</title>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="/img/favicon.png">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@6.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/video.js@8.5.2/dist/video-js.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui">
    <style>
        /* Make the video relative, instead of absolute, so that
   the parent container will size based on the video. Also,
   note the max-height rule. Note the line-height 0 is to prevent
   a small artifact on the bottom of the video.
 */
.video-js.vjs-fluid,
.video-js.vjs-16-9,
.video-js.vjs-4-3,
video.video-js,
video.vjs-tech {
  max-height: calc(100vh);
  position: relative !important;
  width: 100%;
  height: auto !important;
  max-width: 100% !important;
  padding-top: 0 !important;
  line-height: 0;
}

/* Fix the control bar due to us resetting the line-height on the video-js */
.vjs-control-bar {
  line-height: 1;
}
body{background-color: black;}
    </style>
</head>
<body>
    <div id="app">
        <video v-if="playerSrc" :key="playerSrc" id="player"  class="video-js vjs-fluid"  controls>
            <source type="application/x-mpegURL" :src="playerSrc">
        </video>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/video.js@8.5.2/dist/video.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@videojs/http-streaming@3.5.3/dist/videojs-http-streaming.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/videojs-landscape-fullscreen@11.1.0/dist/videojs-landscape-fullscreen.min.js"></script>
    <script>
        new Vue({
            el: '#app',
            vuetify: new Vuetify({
                theme: { dark: true }
            }),
            data() {
                return {
                    playerSrc: ''
                }
            },
            created() {
                const query = new URLSearchParams(location.search)
                this.playerSrc = query.get('id')
                document.title = query.get('title')
                
                this.$nextTick(() =>{
                    setTimeout(()=> {
                        const player = videojs('player', { 
                            autoplay: true,
       //                     userActions: {
							// 	doubleClick: () =>{
							// 		console.log(player.isFullscreen)
							// 		if(player.isFullscreen()){
							// 			player.exitFullscreen()
							// 		}else{
       //                 				player.requestFullscreen()
							// 		}
									
							// 	}
							// }
                        }) 
                        player.landscapeFullscreen();
                        // player.requestFullscreen()
                        // player.ready(function() {
                            // document.querySelector('.vjs-fullscreen-control').click();

                        // if (promise !== undefined) {
                        //     promise.then(function() {
                        //         console.log('완료?')
                        //     // Autoplay started!
                        //     }).catch(function(error) {
                        //     // Autoplay was prevented.
                        //     console.log(error)
                        //     });
                        // }
                        // });
                    }, 100)
                })
            }
        })
    </script>
</body>
</html>